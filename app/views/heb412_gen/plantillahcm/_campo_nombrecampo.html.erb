<% 
  ab = ::Ability.new 
  v = defined?(vista) ? vista : 
    defined?(@vista) ? @vista :
    defined?(f.object.plantillahcm.vista) ? 
    f.object.plantillahcm.vista :
    defined?(ab.campos_plantillas['Usuario']) ? 'Usuario' : nil
  if v.nil? || ab.campos_plantillas[v].nil?
    col = [['','']]
  else
    col = Heb412Gen::PlantillaHelper.campos_vista_formulario(
      v, f.object.plantillahcm ? f.object.plantillahcm.formulario : nil,
      false)
    #col = ab.campos_plantillas[v][:campos]
  end

  col = col.map(&:to_s).localize(:es).sort.to_a
%>
<%= f.input :nombrecampo,
  collection: col,
  label: false
%>
